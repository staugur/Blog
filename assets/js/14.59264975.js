(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{494:function(s,n,e){"use strict";e.r(n);var a=e(4),t=Object(a.a)({},(function(){var s=this,n=s.$createElement,e=s._self._c||n;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("p",[s._v('在docker里 ，乱码似乎是司空见惯的事情，容器封装的java应用，经常在输出日志中看到歪七扭八的"代码"，即便LANG值为zh_CN.UTF-8。')]),s._v(" "),e("p",[s._v('而docker里的时区也是频繁，之前通过挂载系统中/etc/localtime解决容器级的时区，不过java应用也发现在日志中仍旧是UTC时间，一般容器时区准确了，也就没问题，如果还不行，尝试加上"'),e("strong",[s._v("-Duser.timezone=GMT+08")]),s._v('"。')]),s._v(" "),e("p",[s._v("我说说我遇到的几种具体情况和解决方法吧。")]),s._v(" "),e("p",[s._v("1.tomcat")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('vim bin/catalina.sh\n增加或修改以下内容\nJAVA_OPTS="$JAVA_OPTS -Dfile.encoding=UTF8 -Duser.timezone=GMT+08"\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("2.netty")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('#!/bin/bash\nexport JAVA_HOME=/usr/java/jdk1.7.0_60\npid=/var/run/netty.pid\nlib=/data/sspdsp/lib\nexport CLASSPATH=$CLASSPATH\n\nconf=/data/sspdsp/conf\nexport LANG="en_US.UTF-8"\n\n# Extra Java CLASSPATH elements. \nfor f in $lib/*.jar; do\n  if [ "$CLASSPATH" ]; then\n    export CLASSPATH=$CLASSPATH:$f\n  else\n    export CLASSPATH=$f\n  fi\ndone\n\n$JAVA_HOME/bin/java -Xms1024m -Xmx2048m -Dfile.encoding=UTF8 -Duser.timezone=GMT+08 -cp $CLASSPATH com.emar.ssp.SspServer /data/sspdsp/conf/config.properties 200 &\necho $! > $pid \necho "ssp-creative start"\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br")])]),e("p",[s._v("3.resin")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("resin 作为web服务器，根据启动方式的不同，可以修改以下某一个。\n> resin.xml          -Dfile.encoding=UTF-8\n> resin.properties   jvm_args : -Dfile.encoding=UTF-8\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("4.jar")]),s._v(" "),e("p",[s._v("非web应用，直接启动jar程序，采用supervisord守护进程的方式，配置的启动命令是：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("command=java -jar -Xms2048m -Dfile.encoding=UTF-8 -Dspring.config.location=./app.properties app.jar\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])])])}),[],!1,null,null,null);n.default=t.exports}}]);