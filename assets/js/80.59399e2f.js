(window.webpackJsonp=window.webpackJsonp||[]).push([[80],{560:function(n,s,t){"use strict";t.r(s);var a=t(4),e=Object(a.a)({},(function(){var n=this,s=n.$createElement,t=n._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[t("p",[n._v("1、统计nginx访问日志中访问量最大的IP，默认输出前十位，如果你要更改，请修改函数json后common中head为head -n 具体数量。")]),n._v(" "),t("p",[n._v("2、脚本中有两个函数，common和json；前者适用于一般nginx访问日志格式，后者适用于json格式日志。")]),n._v(" "),t("p",[n._v("3、一般格式的日志就将最后一行改为common $1，json格式日志则是json $1")]),n._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v("#!/bin/bash\nif [ -z $1 ];then\n  echo \"Usage:$0 Nginx_access_log\"\n  exit 1\nfi\nfunction common {\n  cat $1 |awk '{print $1}' | sort -nr | uniq -c | sort -nr | head\n  cat $1 | awk '{print $1}' | sort | uniq -c | sort -nr | head \n  awk -F \" \" '{print $1}' $1 | sort | uniq -c | sort -nr | head\n}\nfunction json {\n  cat $1 | jq .remote_addr | sort -nr | uniq -c | sort -nr | head\n}\n\njson $1\n")])]),n._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[n._v("1")]),t("br"),t("span",{staticClass:"line-number"},[n._v("2")]),t("br"),t("span",{staticClass:"line-number"},[n._v("3")]),t("br"),t("span",{staticClass:"line-number"},[n._v("4")]),t("br"),t("span",{staticClass:"line-number"},[n._v("5")]),t("br"),t("span",{staticClass:"line-number"},[n._v("6")]),t("br"),t("span",{staticClass:"line-number"},[n._v("7")]),t("br"),t("span",{staticClass:"line-number"},[n._v("8")]),t("br"),t("span",{staticClass:"line-number"},[n._v("9")]),t("br"),t("span",{staticClass:"line-number"},[n._v("10")]),t("br"),t("span",{staticClass:"line-number"},[n._v("11")]),t("br"),t("span",{staticClass:"line-number"},[n._v("12")]),t("br"),t("span",{staticClass:"line-number"},[n._v("13")]),t("br"),t("span",{staticClass:"line-number"},[n._v("14")]),t("br"),t("span",{staticClass:"line-number"},[n._v("15")]),t("br")])]),t("p",[n._v("效果如下(我的日志是JSON格式)：")]),n._v(" "),t("p",[t("img",{attrs:{src:"https://staugur.gitbooks.io/saintic/content/imgs/blog-21.png",alt:""}})])])}),[],!1,null,null,null);s.default=e.exports}}]);