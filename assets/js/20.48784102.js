(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{317:function(e,s,t){"use strict";t.r(s);var o=t(0),a=Object(o.a)({},(function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("p",[t("strong",[e._v("flask")]),e._v("用session那叫一个方便，封装的不能更好，反观cookie，为人诟病，但实际上，它也易用且强大。")]),e._v(" "),t("p",[e._v("官方文档中，关于cookie的描述篇幅："),t("a",{attrs:{href:"http://flask.pocoo.org/docs/0.11/quickstart/#cookies",target:"_blank",rel:"noopener noreferrer"}},[e._v("http://flask.pocoo.org/docs/0.11/quickstart/#cookies"),t("OutboundLink")],1)]),e._v(" "),t("p",[e._v("不得不说，真的很少，我建议看API文档响应类：[http://flask.pocoo.org/docs/0.11/api/#response-objects](http://flask.pocoo.org/docs\n/0.11/api/#response-objects)")]),e._v(" "),t("p",[e._v("关于设置cookie的接口，内容如下：")]),e._v(" "),t("p",[t("strong",[t("code",[e._v("set_cookie")]),e._v("("),t("em",[e._v("key")]),e._v(", "),t("em",[e._v("value=''")]),e._v(", "),t("em",[e._v("max_age=None")]),e._v(", "),t("em",[e._v("expires=None")]),e._v(", "),t("em",[e._v("path='/'")]),e._v(", "),t("em",[e._v("domain=None")]),e._v(", "),t("em",[e._v("secure=None")]),e._v(", "),t("em",[e._v("httponly=False")]),e._v(")")]),t("a",{attrs:{href:"http://flask.pocoo.org/docs/0.11/api/#flask.Response.set_cookie",target:"_blank",rel:"noopener noreferrer"}},[t("OutboundLink")],1)]),e._v(" "),t("p",[e._v("Sets a cookie. The parameters are the same as in the cookieMorselobject in the Python standard library but it accepts unicode data, too.")]),e._v(" "),t("table",{},[t("colgroup",[t("col"),t("col")]),t("tbody",[t("tr",[t("th",[e._v("Parameters:")]),t("td",[t("ul",[t("li",[t("strong",[e._v("key")]),t("span",[e._v(" ")]),e._v("– the key (name) of the cookie to be set.")]),t("li",[t("strong",[e._v("value")]),t("span",[e._v(" ")]),e._v("– the value of the cookie.")]),t("li",[t("strong",[e._v("max_age")]),t("span",[e._v(" ")]),e._v("– should be a number of seconds, or"),t("span",[e._v(" ")]),t("cite",[e._v("None")]),e._v("(default) if the cookie should last only as long as the client’s browser session.")]),t("li",[t("strong",[e._v("expires")]),t("span",[e._v(" ")]),e._v("– should be a"),t("span",[e._v(" ")]),t("cite",[e._v("datetime")]),t("span",[e._v(" ")]),e._v("object or UNIX timestamp.")]),t("li",[t("strong",[e._v("domain")]),t("span",[e._v(" ")]),e._v("– if you want to set a cross-domain cookie. For example,"),t("span",[e._v(" ")]),t("code",[t("span",[e._v('domain=".example.com"')])]),t("span",[e._v(" ")]),e._v("will set a cookie that is readable by the domain"),t("span",[e._v(" ")]),t("code",[t("span",[e._v("www.example.com")])]),e._v(","),t("span",[e._v(" ")]),t("code",[t("span",[e._v("foo.example.com")])]),e._v("etc. Otherwise, a cookie will only be readable by the domain that set it.")]),t("li",[t("strong",[e._v("path")]),t("span",[e._v(" ")]),e._v("– limits the cookie to a given path, per default it will span the whole domain.")])])])])])]),e._v(" "),t("p",[e._v("我以我所知扯一扯。。。")]),e._v(" "),t("ol",[t("li")]),e._v(" "),t("p",[e._v("set_cookie是Response类的一个方法，所以对于任何“返回”都是可以做附加设置的，我之前在“[Flask使用点滴之访问前后](http://blog.saintic.com/blog/92.htm\nl)”中就点了下：")]),e._v(" "),t("p",[t("img",{attrs:{src:"http://static.saintic.com/interest.blog/blog/45593656869462684.png",alt:""}})]),e._v(" "),t("p",[e._v("另外对于你设定的响应返回 "),t("code",[e._v("[make_response()](http://flask.pocoo.org/docs/0.11/api/#flask.Flask.m ake_response)")]),e._v("的对象，都可以使用set_cookie，比如：")]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('response = make_response(jsonify(success=True))\nresponse = make_response(redirect(url_for("index")))\nresponse = make_response(render_template("xxx.html"))\n')])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br")])]),t("p",[e._v("这些response都可以附加上以返回。")]),e._v(" "),t("ol",{attrs:{start:"2"}},[t("li")]),e._v(" "),t("p",[e._v("set_cookie的参数，"),t("em",[e._v("key")]),e._v(", "),t("em",[e._v("value=''")]),e._v(", "),t("em",[e._v("max_age=None")]),e._v(", "),t("em",[e._v("expires=None")]),e._v(", "),t("em",[e._v("path='/'")]),e._v(", "),t("em",[e._v("domain=None")]),e._v(", "),t("em",[e._v("secure=None")]),e._v(", "),t("em",[e._v("httponly=False")]),e._v("_，_其他的都好理解，我扯一扯max_age和expires。")]),e._v(" "),t("ul",[t("li",[e._v("max_age – should be a number of seconds, or None(default) if the cookie should last only as long as the client’s browser session.")]),e._v(" "),t("li",[e._v("expires – should be a datetime object or UNIX timestamp.")])]),e._v(" "),t("p",[e._v("这两个参数都是设置过期时间的，默认None，也就是一次浏览器会话的时间。")]),e._v(" "),t("p",[e._v("max_age需要int作为秒，它会计算多少秒后，设为过期；")]),e._v(" "),t("p",[e._v("expires需要datetime或timestamp作为值，再计算过期时间。")]),e._v(" "),t("p",[e._v("两个转化的函数供参考：")]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('import datatime, time\ndef How_Much_Time(seconds=0, minutes=0, hours=0):\n    """ 将s、m、h后的时间转化为Y-m-d """\n    dt = datetime.datetime.now() + datetime.timedelta(seconds=int(seconds), minutes=int(minutes), hours=int(hours))\n    return dt.strftime("%Y-%m-%d")\ndef Date2Seconds(date):\n    """ 将Y-m-d后的时间转化为s(当前时间多少秒)  """\n    d = datetime.datetime.strptime(date,"%\nY-%m-%d")\n    return time.mktime(d.timetuple()) - time.time()\n')])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br"),t("span",{staticClass:"line-number"},[e._v("5")]),t("br"),t("span",{staticClass:"line-number"},[e._v("6")]),t("br"),t("span",{staticClass:"line-number"},[e._v("7")]),t("br"),t("span",{staticClass:"line-number"},[e._v("8")]),t("br"),t("span",{staticClass:"line-number"},[e._v("9")]),t("br"),t("span",{staticClass:"line-number"},[e._v("10")]),t("br")])]),t("p",[e._v("关于flask cookie登录的demo：[https://github.com/staugur/flask-cookie-login](https://g\nithub.com/staugur/flask-cookie-login)")]),e._v(" "),t("p",[e._v("The End.")]),e._v(" "),t("p",[e._v("水平有限，若您发现错误 ，烦请通知我们修改，联系方式在页脚处，也可能GitHub上提issue，谢谢！\n"),t("Ads")],1)])}),[],!1,null,null,null);s.default=a.exports}}]);