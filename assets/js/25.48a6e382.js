(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{507:function(t,s,n){"use strict";n.r(s);var a=n(4),e=Object(a.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("p",[t._v("部署Interest.blog生产环境，使用其中一个WSGI应用服务器是uwsgi，使用alpine linux部署到docker容器内，安装时遇到了错误。")]),t._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# pip install sh uwsgi")]),t._v("\nCollecting "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("sh")]),t._v("\n  Using cached sh-1.12.7-py2.py3-none-any.whl\nCollecting uwsgi\n  Downloading uwsgi-2.0.14.tar.gz "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("788kB"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),t._v("% "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("████████████████████████████████"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" 798kB 30kB/s \nInstalling collected packages: sh, uwsgi\n  Running setup.py "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" uwsgi "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(". error\n    Complete output from "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("command")]),t._v(" /usr/bin/python -u -c "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"import setuptools, tokenize;__file__='/tmp/pip-build-hIz7KJ/uwsgi/setup.py';exec(compile(getattr(tokenize, 'open', open)(__file__).read().replace('"),n("span",{pre:!0,attrs:{class:"token entity",title:"\\r"}},[t._v("\\r")]),n("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[t._v("\\n")]),t._v("', '"),n("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[t._v("\\n")]),t._v("'), __file__, 'exec'))\"")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" --record /tmp/pip-biQThG-record/install-record.txt --single-version-externally-managed --compile:\n    running "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v("\n    using profile: buildconf/default.ini\n    detected include path: "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/usr/include'")]),t._v(", "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/usr/lib/gcc/x86_64-alpine-linux-musl/5.3.0/include'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    Patching "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"bin_name"')]),t._v(" to properly install_scripts "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("dir")]),t._v("\n    detected CPU cores: "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n    configured CFLAGS: -O2 -I. -Wall -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("64")]),t._v(" -fno-strict-aliasing -Wextra -Wno-unused-parameter -Wno-missing-field-initializers -DUWSGI_HAS_IFADDRS -DUWSGI_ZLIB -DUWSGI_LOCK_USE_MUTEX -DUWSGI_EVENT_USE_EPOLL -DUWSGI_EVENT_TIMER_USE_TIMERFD -DUWSGI_EVENT_FILEMONITOR_USE_INOTIFY -DUWSGI_VERSION"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),n("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v("2.0.14"),n("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v('"')]),t._v(" -DUWSGI_VERSION_BASE"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2"')]),t._v(" -DUWSGI_VERSION_MAJOR"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0"')]),t._v(" -DUWSGI_VERSION_MINOR"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"14"')]),t._v(" -DUWSGI_VERSION_REVISION"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0"')]),t._v(" -DUWSGI_VERSION_CUSTOM"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),n("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),n("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v('"')]),t._v(" -DUWSGI_YAML -DUWSGI_SSL -DUWSGI_PLUGIN_DIR"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),n("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v("."),n("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v('"')]),t._v(" -DUWSGI_DECLARE_EMBEDDED_PLUGINS"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"UDEP(python);UDEP(gevent);UDEP(ping);UDEP(cache);UDEP(nagios);UDEP(rrdtool);UDEP(carbon);UDEP(rpc);UDEP(corerouter);UDEP(fastrouter);UDEP(http);UDEP(signal);UDEP(syslog);UDEP(rsyslog);UDEP(logsocket);UDEP(router_uwsgi);UDEP(router_redirect);UDEP(router_basicauth);UDEP(zergpool);UDEP(redislog);UDEP(mongodblog);UDEP(router_rewrite);UDEP(router_http);UDEP(logfile);UDEP(router_cache);UDEP(rawrouter);UDEP(router_static);UDEP(sslrouter);UDEP(spooler);UDEP(cheaper_busyness);UDEP(symcall);UDEP(transformation_tofile);UDEP(transformation_gzip);UDEP(transformation_chunked);UDEP(transformation_offload);UDEP(router_memcached);UDEP(router_redis);UDEP(router_hash);UDEP(router_expires);UDEP(router_metrics);UDEP(transformation_template);UDEP(stats_pusher_socket);"')]),t._v(" -DUWSGI_LOAD_EMBEDDED_PLUGINS"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ULEP(python);ULEP(gevent);ULEP(ping);ULEP(cache);ULEP(nagios);ULEP(rrdtool);ULEP(carbon);ULEP(rpc);ULEP(corerouter);ULEP(fastrouter);ULEP(http);ULEP(signal);ULEP(syslog);ULEP(rsyslog);ULEP(logsocket);ULEP(router_uwsgi);ULEP(router_redirect);ULEP(router_basicauth);ULEP(zergpool);ULEP(redislog);ULEP(mongodblog);ULEP(router_rewrite);ULEP(router_http);ULEP(logfile);ULEP(router_cache);ULEP(rawrouter);ULEP(router_static);ULEP(sslrouter);ULEP(spooler);ULEP(cheaper_busyness);ULEP(symcall);ULEP(transformation_tofile);ULEP(transformation_gzip);ULEP(transformation_chunked);ULEP(transformation_offload);ULEP(router_memcached);ULEP(router_redis);ULEP(router_hash);ULEP(router_expires);ULEP(router_metrics);ULEP(transformation_template);ULEP(stats_pusher_socket);"')]),t._v("\n    *** uWSGI compiling server core ***\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("thread "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("gcc"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" core/utils.o\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("thread "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("gcc"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" core/protocol.o\n    In "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v(" included from core/utils.c:1:0:\n    ./uwsgi.h:238:26: fatal error: linux/limits.h: No such "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v(" or directory\n    In "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v(" included from core/protocol.c:1:0:\n    ./uwsgi.h:238:26: fatal error: linux/limits.h: No such "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v(" or directory\n    compilation terminated.\n    compilation terminated.\n    \n    ----------------------------------------\nCommand "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/usr/bin/python -u -c "')]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("import")]),t._v(" setuptools, tokenize"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("__file__")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/tmp/pip-build-hIz7KJ/uwsgi/setup.py'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("exec"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("compile"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("getattr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("tokenize, "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'open'")]),t._v(", "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("open")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__file__"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(".read"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(".replace"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'"),n("span",{pre:!0,attrs:{class:"token entity",title:"\\r"}},[t._v("\\r")]),n("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[t._v("\\n")]),t._v("'")]),t._v(", "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'"),n("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[t._v("\\n")]),t._v("'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(", __file__, "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'exec'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("))")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('" install --record /tmp/pip-biQThG-record/install-record.txt --single-version-externally-managed --compile"')]),t._v(" failed with error code "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" /tmp/pip-build-hIz7KJ/uwsgi/\nYou are using pip version "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("8.1")]),t._v(".2, however version "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("9.0")]),t._v(".1 is available.\nYou should consider upgrading via the "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'pip install --upgrade pip'")]),t._v(" command.\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br"),n("span",{staticClass:"line-number"},[t._v("22")]),n("br"),n("span",{staticClass:"line-number"},[t._v("23")]),n("br"),n("span",{staticClass:"line-number"},[t._v("24")]),n("br"),n("span",{staticClass:"line-number"},[t._v("25")]),n("br"),n("span",{staticClass:"line-number"},[t._v("26")]),n("br"),n("span",{staticClass:"line-number"},[t._v("27")]),n("br"),n("span",{staticClass:"line-number"},[t._v("28")]),n("br"),n("span",{staticClass:"line-number"},[t._v("29")]),n("br")])]),n("p",[t._v("缺少linux/limits.h头文件，RHEL/CentOS系列可以安装glic-headers，alpine需要安装包——linux-headers，命令：")]),t._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("apk add --no-cache linux-headers\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br")])]),n("p",[t._v("然后再执行pip install uwsgi即可安装。")]),t._v(" "),n("p",[t._v("另一个方法是，alpine直接用apk安装uwsgi，命令：")]),t._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("apk add --no-cache uwsgi\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br")])]),n("p",[t._v("参考："),n("a",{attrs:{href:"https://pkgs.alpinelinux.org/packages?name=*uwsgi*&branch=&repo=main&arch=&maintainer=",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://pkgs.alpinelinux.org/packages?name=*uwsgi*&branch=&repo=main&arch=&maintainer="),n("OutboundLink")],1)])])}),[],!1,null,null,null);s.default=e.exports}}]);