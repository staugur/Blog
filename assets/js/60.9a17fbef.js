(window.webpackJsonp=window.webpackJsonp||[]).push([[60],{540:function(t,e,n){"use strict";n.r(e);var r=n(4),s=Object(r.a)({},(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("p",[n("strong",[t._v("说在前面：")])]),t._v(" "),n("p",[t._v("在HTTP协议中，传输数据是明文，被第三方截获后很容易看出数据，所以现在主流建议是HTTPS加密传输，如Chrome，新版本用HTTP会提示不安全。")]),t._v(" "),n("p",[t._v("除此之外，我们也可以约定一种或多种加密算法对传输的数据在客户端加密、服务端解密，并且使用签名，这样第三方截获，也无法获取数据明文，且防篡改，大大增加传输安全性。")]),t._v(" "),n("p",[n("strong",[t._v("本篇内容：")])]),t._v(" "),n("p",[t._v("通过使用RSA+AES让HTTP传输更加安全，即C/S架构的加密通信！")]),t._v(" "),n("p",[t._v("此功能实现介绍的是"),n("strong",[t._v("Python-SecureHTTP")]),t._v("，开源地址是："),n("a",{attrs:{href:"https://github.com/staugur/Python-SecureHTTP",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/staugur/Python-SecureHTTP"),n("OutboundLink")],1),t._v("，文档地址是："),n("a",{attrs:{href:"https://python-securehttp.rtfd.vip",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://python-securehttp.rtfd.vip"),n("OutboundLink")],1)]),t._v(" "),n("p",[n("strong",[t._v("加密算法：")])]),t._v(" "),n("p",[t._v("Python-SecureHTTP使用的加密算法相关如下，使用相同标准，其他语言如Java、PHP、Go、JS等均可通信。")]),t._v(" "),n("ol",[n("li",[n("p",[t._v("AES加解密::")]),t._v(" "),n("p",[t._v("模式：CBC")]),t._v(" "),n("p",[t._v("密钥长度：128bit")]),t._v(" "),n("p",[t._v("密钥key要求16字节及倍数，iv取key前16字节")]),t._v(" "),n("p",[t._v("补码方式：PKCS5Padding")]),t._v(" "),n("p",[t._v("加密结果编码方式：十六进制")])]),t._v(" "),n("li",[n("p",[t._v("RSA加解密::")]),t._v(" "),n("p",[t._v("算法：RSA")]),t._v(" "),n("p",[t._v("填充：RSA_PKCS1_PADDING")]),t._v(" "),n("p",[t._v("密钥格式：符合PKCS#1规范，密钥对采用PEM形式，公钥要求pkcs1或pkcs8格式，私钥要求pkcs1格式")])]),t._v(" "),n("li",[n("p",[t._v("签名::")]),t._v(" "),n("p",[t._v("对请求参数或数据添加公共参数后排序再使用MD5签名。")])])]),t._v(" "),n("p",[t._v("更多了解可以参考"),n("a",{attrs:{href:"https://www.jianshu.com/p/b092b4fac27c",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://www.jianshu.com/p/b092b4fac27c"),n("OutboundLink")],1),t._v("，上面包的实现逻辑参考此文。")]),t._v(" "),n("p",[n("strong",[t._v("安装使用：")])]),t._v(" "),n("ol",[n("li",[n("p",[t._v("安装："),n("code",[t._v("pip install Python-SecureHTTP")])])]),t._v(" "),n("li",[n("p",[t._v("逻辑：")])])]),t._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('    客户端上传数据加密 ==> 服务端获取数据解密 ==> 服务端返回数据加密 ==> 客户端获取数据解密\n\n    NO.1 客户端上传数据加密流程::\n\n        1. 客户端随机产生一个16位的字符串，用以之后AES加密的秘钥，AESKey。\n        2. 使用RSA对AESKey进行公钥加密，RSAKey。\n        3. 参数加签，规则是：对所有请求或提交的字典参数按key做升序排列并用"参数名=参数值&"形式连接。\n        4. 将明文的要上传的数据包(字典/Map)转为Json字符串，使用AESKey加密，得到JsonAESEncryptedData。\n        5. 封装为{key : RSAKey, value : JsonAESEncryptedData}的字典上传服务器，服务器只需要通过key和value，然后解析，获取数据即可。\n\n    NO.2 服务端获取数据解密流程::\n\n        1. 获取到RSAKey后用服务器私钥解密，获取到AESKey\n        2. 获取到JsonAESEncriptedData，使用AESKey解密，得到明文的客户端上传上来的数据。\n        3. 验签\n        4. 返回明文数据\n\n    NO.3 服务端返回数据加密流程::\n\n        1. 将要返回给客户端的数据(字典/Map)进行加签并将签名附属到数据中\n        2. 上一步得到的数据转成Json字符串，用AESKey加密处理，记为AESEncryptedResponseData\n        3. 封装数据{data : AESEncryptedResponseData}的形式返回给客户端\n\n    NO.4 客户端获取数据解密流程::\n\n        1. 客户端获取到数据后通过key为data得到服务器返回的已经加密的数据AESEncryptedResponseData\n        2. 对AESEncryptedResponseData使用AESKey进行解密，得到明文服务器返回的数据。\n')])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br"),n("span",{staticClass:"line-number"},[t._v("22")]),n("br"),n("span",{staticClass:"line-number"},[t._v("23")]),n("br"),n("span",{staticClass:"line-number"},[t._v("24")]),n("br"),n("span",{staticClass:"line-number"},[t._v("25")]),n("br"),n("span",{staticClass:"line-number"},[t._v("26")]),n("br"),n("span",{staticClass:"line-number"},[t._v("27")]),n("br")])]),n("ol",{attrs:{start:"3"}},[n("li",[t._v("调用：")])]),t._v(" "),n("p",[t._v("Python-SecureHTTP提供两个核心类，"),n("code",[t._v("EncryptedCommunicationClient")]),t._v("（针对逻辑NO.1、NO.4）和"),n("code",[t._v("EncryptedCommunicationServer")]),t._v("（针对逻辑NO.2、NO.3）。")]),t._v(" "),n("ol",{attrs:{start:"4"}},[n("li",[t._v("核心类说明：")])]),t._v(" "),n("ul",[n("li",[n("p",[t._v("4.1 EncryptedCommunicationClient：客户端加密通信类，提供clientEncrypt（NO.1加密）、clientDecrypt（NO4解密）两个方法。")])]),t._v(" "),n("li",[n("p",[t._v("4.2 EncryptedCommunicationServer：服务端加密通信类，提供serverDecrypt（NO.2解密）、serverEncrypt（NO.3加密）两个方法。")])]),t._v(" "),n("li",[n("p",[t._v("4.3 更多API文档，请访问"),n("a",{attrs:{href:"https://python-securehttp.rtfd.vip/#api-documentation",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://python-securehttp.rtfd.vip/#api-documentation"),n("OutboundLink")],1)])])]),t._v(" "),n("p",[n("strong",[t._v("应用场景：")])]),t._v(" "),n("ul",[n("li",[n("ol",[n("li",[t._v("http、https下post等数据方面加密，比如登录表单加密提交")])])]),t._v(" "),n("li",[n("ol",{attrs:{start:"2"}},[n("li",[t._v("c/s环境下数据传输加密，比如企业app请求web api服务")])])])]),t._v(" "),n("p",[n("strong",[t._v("示例代码：")])]),t._v(" "),n("ul",[n("li",[n("ol",[n("li",[t._v("不同语言的AES加密的示例："),n("a",{attrs:{href:"https://github.com/staugur/Python-SecureHTTP/tree/master/examples/AES-CBC-PKCS5Padding",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/staugur/Python-SecureHTTP/tree/master/examples/AES-CBC-PKCS5Padding"),n("OutboundLink")],1)])])]),t._v(" "),n("li",[n("ol",{attrs:{start:"2"}},[n("li",[t._v("不同语言的RSA加密的示例："),n("a",{attrs:{href:"https://github.com/staugur/Python-SecureHTTP/tree/master/examples/RSA-PKCS1-PEM",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/staugur/Python-SecureHTTP/tree/master/examples/RSA-PKCS1-PEM"),n("OutboundLink")],1)])])]),t._v(" "),n("li",[n("ol",{attrs:{start:"3"}},[n("li",[t._v("不同语言的MD5签名的示例：还没有找")])])]),t._v(" "),n("li",[n("ol",{attrs:{start:"4"}},[n("li",[t._v("不同语言的HMAC-SHA256的示例（暂时没用此算法作签名）："),n("a",{attrs:{href:"https://github.com/staugur/Python-SecureHTTP/tree/master/examples/HMAC-SHA256",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/staugur/Python-SecureHTTP/tree/master/examples/HMAC-SHA256"),n("OutboundLink")],1)])])]),t._v(" "),n("li",[n("ol",{attrs:{start:"5"}},[n("li",[t._v("B/S示例："),n("a",{attrs:{href:"https://github.com/staugur/Python-SecureHTTP/tree/master/examples/BS-RSA",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/staugur/Python-SecureHTTP/tree/master/examples/BS-RSA"),n("OutboundLink")],1)])])])]),t._v(" "),n("p",[n("strong",[t._v("说在后面：")])]),t._v(" "),n("p",[t._v("！欢迎star，欢迎贡献pr、Issue")])])}),[],!1,null,null,null);e.default=s.exports}}]);